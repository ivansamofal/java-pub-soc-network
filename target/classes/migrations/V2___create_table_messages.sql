ALTER TABLE users
    ADD CONSTRAINT user_pk
        PRIMARY KEY (id);

ALTER TABLE messages ADD CONSTRAINT author_user_id_fk FOREIGN KEY (author_user_id) REFERENCES users (id);
ALTER TABLE messages ADD CONSTRAINT recipient_user_id_fk FOREIGN KEY (recipient_user_id) REFERENCES users (id);

CREATE TABLE messages (
  id integer NOT NULL generated by default as identity,
  author_user_id int,
  recipient_user_id int,
  text varchar(1000),
  status smallint,
  created_at timestamp not null
);

ALTER TABLE messages
    ADD CONSTRAINT messages_pk
        PRIMARY KEY (id);


ALTER TABLE users ADD COLUMN auth_key char(32) unique ;